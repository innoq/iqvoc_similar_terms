language: ruby
cache: bundler
bundler_args: "--without production heroku --retry 3"
rvm:
- 2.0
- 2.1
- 2.2
- 2.3
env:
- DB=sqlite
- DB=mysql
before_install: cp config/database.yml.$DB config/database.yml
before_script:
- bundle exec rake db:drop RAILS_ENV=test
- bundle exec rake db:create RAILS_ENV=test
- bundle exec rake db:migrate RAILS_ENV=test
branches:
  only:
  - master
notifications:
  email:
  - iqvoc@innoq.com
deploy:
  provider: rubygems
  api_key:
    secure: gaKVohEtHR8ZVVTirZIJNr64gkFq9jS89OziQYddAvHMmg4LCfY3PFLLt9GPbOal6OBx/NWx8nPWXoaEoCpxKtusTVv4GPygrE1RXILXY4A1YDHk1p+NYp5IDyCMQrwJzP05qS+LWcEJFM0zJChFXiHqflVhTKTLSyIk+bc+QZc=
  gem: iqvoc_similar_terms
  on:
    tags: true
    repo: innoq/iqvoc_similar_terms
